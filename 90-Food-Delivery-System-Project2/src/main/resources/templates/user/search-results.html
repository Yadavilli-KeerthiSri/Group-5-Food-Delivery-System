<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Food Search</title>
<style>
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: #fdfdfd; /* Off-white background */
        padding: 30px;
        color: #444;
    }

    /* SEARCH BOX: Centered with a soft blue tint */
    .search-box {
        width: 100%;
        max-width: 600px;
        margin: 0 auto 40px;
        display: flex;
        box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        border-radius: 8px;
        overflow: hidden;
    }

    .search-box input {
        flex: 1;
        padding: 15px;
        font-size: 16px;
        border: 1px solid #e0e0e0;
        outline: none;
    }

    .search-box button {
        padding: 0 25px;
        background: #6c5ce7; /* Modern Soft Purple */
        color: white;
        border: none;
        cursor: pointer;
        font-weight: bold;
        transition: background 0.3s;
    }

    .search-box button:hover {
        background: #5849c4;
    }

    /* TITLES: Colorful and clear */
    .section-title {
        margin-top: 40px;
        font-size: 22px;
        font-weight: bold;
        color: #2d3436;
        border-left: 5px solid #00cec9; /* Mint accent */
        padding-left: 15px;
    }

    /* CARDS: Clean white with soft shadows */
    .card {
        background: white;
        padding: 20px;
        margin: 15px 0;
        border-radius: 12px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.04);
        border: 1px solid #f0f0f0;
        transition: transform 0.2s;
    }

    .card:hover {
        transform: translateY(-3px);
    }

    .card h3 {
        margin-top: 0;
        color: #6c5ce7;
    }

    .card p {
        line-height: 1.6;
        color: #636e72;
    }

    /* BUTTONS: Rounded and colorful */
    button, .view-btn {
        padding: 10px 20px;
        font-size: 14px;
        background: #ff7675; /* Soft Coral/Pink */
        color: white;
        border: none;
        cursor: pointer;
        border-radius: 25px;
        text-decoration: none;
        display: inline-block;
        transition: all 0.3s;
    }

    .view-btn:hover, button:hover {
        background: #d63031;
        box-shadow: 0 4px 10px rgba(255, 118, 117, 0.3);
    }

    .empty {
        text-align: center;
        color: #b2bec3;
        margin-top: 50px;
        font-style: italic;
    }
</style>
</head>
<body>

    <!-- ================= SEARCH FORM ================= -->
    <form class="search-box" th:action="@{/user/search}" method="get">
        <input type="text" name="keyword" th:value="${keyword}" placeholder="Search restaurants or dishes" required>
        <button type="submit">Search</button>
    </form>

    <!-- ================= RESTAURANT RESULTS ================= -->
    <div th:if="${!#lists.isEmpty(restaurants)}">
        <div class="section-title">Restaurants</div>
        <div class="card" th:each="r : ${restaurants}">
            <h3 th:text="${r.restaurantName}"></h3>
            <p>
                üìç <span th:text="${r.location}"></span><br> 
                üçΩÔ∏è <span th:text="${r.cuisine}"></span><br> 
                ‚≠ê <span style="color: #fdcb6e; font-weight: bold;" th:text="${r.ratings}"></span>
            </p>
            <form th:action="@{/user/restaurants/{id}(id=${r.restaurantId})}" method="get">
                <button type="submit">View Menu</button>
            </form>
        </div>
    </div>

    <!-- ================= MENU ITEM RESULTS ================= -->
    <div th:if="${!#lists.isEmpty(menuItems)}">
        <div class="section-title">Menu Items</div>
        <div class="card" th:each="item : ${menuItems}">
            <h3 th:text="${item.itemName}"></h3>
            <p>
                üí∞ <span style="color: #2ecc71; font-weight: bold;">‚Çπ<span th:text="${item.price}"></span></span><br> 
                üè™ <span th:text="${item.restaurant.restaurantName}"></span>
            </p>
            <a th:href="@{/user/restaurants/{id}(id=${item.restaurant.restaurantId})}" class="view-btn">View in Restaurant Menu</a>
        </div>
    </div>

    <!-- ================= NO RESULTS ================= -->
    <div class="empty" th:if="${#lists.isEmpty(restaurants) and #lists.isEmpty(menuItems)}">
        No restaurants or menu items found. Try a different search!
    </div>

</body>
</html>
