<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Explore Restaurants | FoodExec</title>

<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com" rel="stylesheet">

<style>
body {
	font-family: 'Inter', sans-serif;
}
</style>
</head>

<body class="bg-slate-50 min-h-screen p-6 md:p-12">

	<div class="max-w-6xl mx-auto">

		<!-- âœ… BACK TO DASHBOARD (TOP LEFT) -->
		<a th:href="@{/user/dashboard}"
			class="inline-flex items-center gap-2 text-amber-500 hover:text-amber-600 font-bold text-xs uppercase tracking-widest mb-8 transition-colors group">
			<span class="bg-amber-50 group-hover:bg-amber-100 p-2 rounded-full">
				â† </span> Back to Dashboard
		</a>

		<!-- Header -->
		<header
			class="mb-12 flex flex-col md:flex-row justify-between items-end gap-4"
			th:with="f=${param.filter != null and #lists.size(param.filter) > 0} ? ${param.filter[0]} : 'all'">

			<div>
				<h1 class="text-4xl font-extrabold text-slate-900 tracking-tight">
					All Restaurants</h1>
				<p class="text-slate-500 mt-2 font-medium">Discover the best
					food & drinks in your area</p>
			</div>

			<!-- Filter Bar -->
			<div
				class="flex items-center gap-3 bg-white p-2 rounded-2xl shadow-sm border border-slate-100">
				<span
					class="pl-3 text-slate-400 text-sm font-bold uppercase tracking-widest">
					Filter: </span>

				<!-- All -->
				<a th:href="@{/user/restaurants(filter='all')}"
					class="px-4 py-2 rounded-xl text-sm font-bold transition-all active:scale-95"
					th:classappend="${f} == 'all'
                    ? ' bg-amber-500 text-white shadow-md shadow-amber-100'
                    : ' text-slate-500 hover:bg-slate-50'">
					All </a>

				<!-- Top Rated -->
				<a th:href="@{/user/restaurants(filter='top')}"
					class="px-4 py-2 rounded-xl text-sm font-bold transition-all"
					th:classappend="${f} == 'top'
                    ? ' bg-amber-500 text-white shadow-md shadow-amber-100'
                    : ' text-slate-500 hover:bg-slate-50'">
					Top Rated </a>
			</div>
		</header>

		<!-- Restaurants Grid -->
		<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">

			<div th:each="r : ${restaurants}"
				class="group bg-white rounded-[2.5rem] overflow-hidden shadow-sm border border-slate-100 hover:shadow-2xl hover:shadow-amber-200/40 transition-all duration-300 flex flex-col">

				<!-- Card Image -->
				<div class="h-52 bg-orange-50 relative overflow-hidden image-wrap">
					<!-- Actual image sourced from DB path like /images/Biryani.png -->
					<img
						th:if="${r.imageName != null and !#strings.isEmpty(r.imageName)}"
						th:src="@{${r.imageName}}" alt="Restaurant image"
						class="absolute inset-0 w-full h-full object-cover object-center transition-transform duration-700 group-hover:scale-110"
						onerror="this.style.display='none'; this.closest('.image-wrap').querySelector('[data-fallback]').style.display='flex';" />

					<!-- Fallback emoji if no image or on error -->
					<div data-fallback
						th:style="${(r.imageName == null or #strings.isEmpty(r.imageName)) ? 'display:flex;' : 'display:none;'}"
						class="absolute inset-0 items-center justify-center text-7xl transition-transform duration-700 group-hover:scale-110">

						ğŸª</div>

					<!-- Rating -->
					<div
						class="absolute top-4 right-4 bg-white/90 backdrop-blur-md px-3 py-1 rounded-full flex items-center gap-1 shadow-sm">
						<span class="text-amber-500 font-bold text-sm"
							th:text="${r.ratings}">4.5</span> <span
							class="text-amber-400 text-xs">â˜…</span>
					</div>
				</div>

				<!-- Content -->
				<div class="p-6 flex-1 flex flex-col">
					<div class="mb-4">
						<h3
							class="text-xl font-extrabold text-slate-800 mb-1 group-hover:text-amber-600 transition-colors"
							th:text="${r.restaurantName}">Restaurant Name</h3>

						<div class="flex items-center gap-2">
							<span
								class="text-xs font-bold text-amber-600 bg-amber-50 px-2 py-0.5 rounded-md uppercase tracking-tighter"
								th:text="${r.cuisine}"> Cuisine </span> <span
								class="w-1 h-1 rounded-full bg-slate-300"></span> <span
								class="text-xs text-slate-400 font-medium"> Free Delivery
							</span>
						</div>
					</div>

					<!-- View Menu -->
					<div class="mt-auto pt-4 border-t border-slate-50">
						<a th:href="@{/user/restaurants/{id}(id=${r.restaurantId})}"
							class="flex items-center justify-between group/link"> <span
							class="text-sm font-bold text-slate-700 group-hover/link:text-amber-600 transition-colors">
								View Menu </span>
							<div
								class="w-10 h-10 rounded-full bg-slate-50 flex items-center justify-center group-hover/link:bg-amber-500 group-hover/link:text-white transition-all">
								<svg class="w-5 h-5" fill="none" stroke="currentColor"
									viewBox="0 0 24 24">
                                <path stroke-linecap="round"
										stroke-linejoin="round" stroke-width="2.5"
										d="M13 7l5 5m0 0l-5 5m5-5H6" />
                            </svg>
							</div>
						</a>
					</div>
				</div>
			</div>
		</div>

		<!-- Empty State -->
		<div th:if="${#lists.isEmpty(restaurants)}" class="py-20 text-center">
			<span class="text-6xl grayscale opacity-50">ğŸ½ï¸</span>
			<h3 class="text-2xl font-bold text-slate-400 mt-4">No
				restaurants found</h3>
			<p class="text-slate-400">Try adjusting your filters or checking
				back later.</p>
		</div>

	</div>

</body>
</html>
