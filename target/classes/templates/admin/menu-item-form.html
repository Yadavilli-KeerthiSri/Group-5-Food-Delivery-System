<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Manage Menu Item | Admin</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body
	class="bg-slate-50 min-h-screen flex items-center justify-center p-6">

	<div class="w-full max-w-lg">
		<a th:href="@{/admin/menu-items}"
			class="inline-flex items-center text-sm font-medium text-slate-500 hover:text-emerald-600 mb-6 transition-colors">
			‚Üê Back to Menu List </a>

		<div
			class="bg-white rounded-2xl shadow-xl p-8 border border-slate-100 relative overflow-hidden">
			<div class="absolute top-0 left-0 w-full h-1.5 bg-emerald-500"></div>

			<div class="mb-8">
				<h2 class="text-2xl font-bold text-slate-800">Menu Item Details</h2>
				<p class="text-slate-500 text-sm">Add or update dishes</p>
			</div>

			<!-- DYNAMIC ACTION: Switches between /save and /update/{id} based on itemId -->
<form th:action="${item.itemId == null} ? @{/admin/menu-items/save} : @{'/admin/menu-items/update/' + ${item.itemId}}" 
      th:object="${item}" 
      method="post" 
      class="space-y-5">

    <!-- CONDITIONAL PUT: Only use PUT for editing existing items -->
    <input type="hidden" th:if="${item.itemId != null}" name="_method" value="PUT" />
    
    <input type="hidden" th:field="*{itemId}" />

    <!-- ITEM NAME -->
    <div>
        <label class="block text-sm font-semibold text-slate-700 mb-1">Item Name</label>
        <input type="text" th:field="*{itemName}" required="required"
               class="w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg outline-none focus:ring-2 focus:ring-emerald-500" />
    </div>

    <div class="grid grid-cols-2 gap-4">
        <!-- CATEGORY -->
<div>
    <label class="block text-sm font-semibold text-slate-700 mb-1">Category</label>
    <input type="text" 
           th:field="*{category}" 
           required="required" 
           pattern="^[A-Za-z\s]+$" 
           title="Category should only contain letters and spaces (no numbers)"
           class="w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg" />
</div>
</div>
        <!-- PRICE -->
        <div>
    <label class="block text-sm font-semibold text-slate-700 mb-1">Price (‚Çπ)</label>
    <input type="number" 
           step="0.01" 
           min="0" 
           th:field="*{price}" 
           required="required" 
           placeholder="0.00"
           class="w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg" />
</div>
    <!-- RESTAURANT SELECT -->
    <div>
        <label class="block text-sm font-semibold text-slate-700 mb-1">Assign to Restaurant</label>
        <!-- Explicitly set name="restaurantId" to match your @RequestParam in Controller -->
        <select name="restaurantId" required="required"
                class="w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg outline-none focus:ring-2 focus:ring-emerald-500">
            <option value="">-- Select Restaurant --</option>
            <option th:each="r : ${restaurants}" 
                    th:value="${r.restaurantId}" 
                    th:text="${r.restaurantName}"
                    th:selected="${r.restaurantId == item.restaurantId}"></option>
        </select>
    </div>

    <div class="pt-4">
        <button type="submit" 
                class="w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 rounded-xl transition-all shadow-lg shadow-emerald-100">
            <span th:text="${item.itemId == null} ? '‚ûï Add Menu Item' : 'üíæ Update Menu Item'"></span>
        </button>
    </div>
</form>
		</div>
	</div>

</body>
</html>
